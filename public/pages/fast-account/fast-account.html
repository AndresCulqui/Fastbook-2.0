<polymer-element name="fast-account">
  <template>
    <style>    
      :host {
          position: absolute;
          width: 100%;
          height: 100%;
          box-sizing: border-box;

      }
      #core_pages {
          width: 100%;
          height: 100%;
          margin-top: -50px;
          position: absolute;
      }
      #section{ margin: 20px; }
      #button_enter{
          background: rgba(8,46,64, 0.6);
          border: 3px solid dimgray;
          border-radius: 10px;
          height: 700px;
          padding: 3%;
      }
      h1 {
        font-size: 35px;
        color: white;
        font-family: Courier;
        font-weight: bold;
        text-shadow: #fff 0 0 4px, #fcffbb 0 0 20px;
      }

      label {
          color: black;
          font-family: Courier;
          font-weight: bold;
          text-shadow: #fff 0 0 4px, #fcffbb 0 0 20px;
      }

      label {
          font-weight: bold;
          font-family: Verdana;   
          clear: both;
          text-align: left;
          margin-top: 20px;
      }

      p{
        color: white;
        font-family: Courier;
        font-weight: bold;
        text-shadow: #fff 0 0 4px, #fcffbb 0 0 20px;
      }
      .accept {
          margin-top: 10px;
          margin-right: 20px;
          margin-bottom: 15px;
          background: rgb(255,168,76); /* Old browsers */
          background: -moz-linear-gradient(top,  rgba(255,168,76,1) 60%, rgba(255,123,13,1) 100%); /* FF3.6+ */
          background: -webkit-gradient(linear, left top, left bottom, color-stop(60%,rgba(255,168,76,1)), color-stop(100%,rgba(255,123,13,1))); /* Chrome,Safari4+ */
          background: -webkit-linear-gradient(top,  rgba(255,168,76,1) 60%,rgba(255,123,13,1) 100%); /* Chrome10+,Safari5.1+ */
          background: -o-linear-gradient(top,  rgba(255,168,76,1) 60%,rgba(255,123,13,1) 100%); /* Opera 11.10+ */
          background: -ms-linear-gradient(top,  rgba(255,168,76,1) 60%,rgba(255,123,13,1) 100%); /* IE10+ */
          background: linear-gradient(to bottom,  rgba(255,168,76,1) 60%,rgba(255,123,13,1) 100%); /* W3C */
          filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffa84c', endColorstr='#ff7b0d',GradientType=0 ); /* IE6-9 */
          color: white;
          font-weight: bold;
      }
      .accept:hover {
          opacity: 0.8;
          color: dimgray;
      }

      paper-input-decorator {
          padding: 0px 0px 0px 7px;
          box-shadow: blue 20px;
          margin-left: -2px;
          margin-bottom: 30px;
      }
      #core_pages1, #core_pages2 {
          background-image: url('../images/form.png');
          background-size: 100% 100%;
          border: 5px solid;
          border-radius: 10px;
      }

      #core_pages1 {
          width: 40%;
          height: 690px;
          margin-right: 2%;
          padding-left: 4%;
          padding-right: 4%;
          float: left;
      }
      #core_pages2 {
          height: 690px;
          margin-left: 50%;
          padding-left: 4%;
          padding-right: 4%;
      }

      paper-checkbox {
          padding: 0px 20px 0px 0px;
          float: left;
      }

      paper-checkbox.blue::shadow #ink[checked] {
          color: #4285f4;
      } 

      paper-checkbox.blue::shadow #checkbox.checked {
          border-color: #4285f4;
      }
      a { font-size: 15px;
          color: blue;
          text-decoration: none;
      }
      .comment { color: dimgray; font-family: arial; font-size: 12px; }
      .icon{
          margin-left: -5%;
          float: left;
          clear: both;
          border: 2px solid dimgray;
          border-top-left-radius: 5px;
          border-bottom-left-radius: 5px;
          height: 43px;
          width: 12%;
      }
      #core_icon { margin-bottom: 10%; }
      .button {
        width: 250px;
        height: 45px;
      }
      .button:hover { opacity: 0.6;}
      #facebook{ background-image: url('../../images/facebook.png'); background-size: 100% 100%;}
      #twitter{ background-image: url('../../images/twitter.png'); background-size: 100% 100%;}
      #google{ background-image: url('../../images/google.png'); background-size: 100% 100%;}

      @media (max-width: 600px) {

          #button_enter {
              padding: 0px;
              border: 0px;
              background: none;
          }
          #section { margin: 0px;}
          h1 { margin-bottom: -10px; font-size: 20px;}

          #core_pages1, #core_pages2 {
              border-radius: 10px;
              width: 91.5%;
              background-image: url('../images/form.png');
              background-size: 100% 100%;
              height: auto;
              border: 1px solid dimgray;
          }

          #core_pages1 {
              float: none;
          }
          #core_pages2{
              margin-top: 1%;
              margin-left: 0px;
          }
          paper-input-decorator {
              width: 100%;
              padding: 0px 0px 0px 0px;
              margin-bottom: 0px;
          }

          #button_e { margin-top: 5%; }
          .icon, label, paper-checkbox, .remember { display: none; }

          label{
              visibility: hidden;
              margin-top: 0px;
              margin-bottom: 0px;
          }
          paper-item {
              margin-top: -30px;
              margin-bottom: -10px;
          }
          #core_icon { margin-top: 8%; margin-bottom: 8%;}
          .accept {
              width: 100%;
              height: 25px;
              font-size: 10px;
              margin-right: 0px;
          }
          a { font-size: 10px;}
          p { font-size: 15px;}
          .button {
              width: 50px;
              height: 50px;
          }
          .login-social{
              
              height: 0px;
              margin-bottom: 80px;
          }
          #facebook{ 
            background-image: url('../../images/facebook.png'); 
            background-size: 580% 100%;
            quotesmargin-right: 200px;
          }
          #twitter{ 
            background-image: url('../../images/twitter.png'); 
            background-size: 580% 100%;
            margin-right: 200px;
          }
          #google{ 
            background-image: url('../../images/google.png'); 
            background-size: 580% 100%;}
          h1 {
            margin-bottom: 15px;
          }
      }

    </style>

    <core-pages selected="0" selectedindex="0" notap id="page_account">

      <section id="section" active>        
        <div id="button_enter">
          <div id="core_pages1">

            <h1> Sign In </h1><br>

            <label> E-mail: </label>
          
            <paper-input-decorator id="decorator" label="someone@example.com" error="Email is Required" >
              <input id="email_s" is="core-input" on-keyup="{{validate_email_sign}}" required>
            </paper-input-decorator>

            <label> Password: </label>
        
            <paper-input-decorator id="decorator2" label="Password" error="Password is Required">
              <input id="password" is="core-input" type="password" required>
            </paper-input-decorator>

            <div id="button_e" tool center-justified horizontal layout display:flex>
              <paper-button id="ok" on-tap="{{ validateSigin }}" class="accept" showing> LOGIN >> </paper-button> 
            </div><br>

            <paper-checkbox for> </paper-checkbox> <div class="remember"> Remember me </div>
           
            <paper-item noink><a href="http://www.google.es" layout horizontal center>Lost your Password?</a> </paper-item>

            <p>Connect with Social Login </p>
                        
            <div class="login-social" vertical layout center>
               <a href="../../auth/twitter"><paper-button id="twitter" class="button" on-tap="{{ test }}">
               </paper-button> </a>
               <a href="../../auth/facebook"><paper-button id="facebook" class="button" on-tap="{{ test }}">
               </paper-button> </a>
               <!--<paper-button id="google" class="button" on-tap="{{loginGoogle }}">
               </paper-button> -->
               
               <google-signin id="signGoogle"  class="button" labelSignin="Sign in with Google"  scopes="email" clientId='768969970497-j73ejp1juep7a0lm1s8tmn284mg9ogmg.apps.googleusercontent.com'></google-signin> 
             
        
              
               
               
               
            </div>

          </div>
          <div id="core_pages2">

            <h1>Register</h1>

            <!--<core-icon icon="avatars:avatar-1" id="core_icon" designmeta="topeka-avatar"></core-icon>
            <br>-->

            <label> Name: </label>

            <paper-input-decorator id="name_register" label="Name & Lastname" error="Name & LastName is Required">
              <input id="r_name" is="core-input" maxlength="30" on-keyup="{{validate_name}}"  required>
            </paper-input-decorator>
            <label> Create Password: </label>

            <paper-input-decorator id="pass_register" label="Password" error="Password is Required">
              <input id="r_pass" is="core-input" type="password" required>
            </paper-input-decorator>
            <label> Reenter Password: </label>

            <paper-input-decorator id="repass_register" label="Reenter Password" error="Password is Required">
              <input id="repass" is="core-input" type="password" on-blur="{{validate_repass}}" required>
            </paper-input-decorator>
            <label> Email: </label>

            <paper-input-decorator id="email_register" label="example@example.com" error="Email is Required">
              <input id="email" is="core-input" type="email" on-keyup="{{validate_mail_r}}" required>
            </paper-input-decorator>

            <br><br>

            <div class="comment" center-justified horizontal layout>
              Click Create Account to agree to the Fastbook Services Agreement and Privacy and cookies statement.</div><br>

            <div id="button_register" tool center center-justified horizontal layout display:flex>
              <paper-button class="accept" on-tap="{{ accept }}">Create account</paper-button>
            </div>
            
            <core-ajax id="ajax"></core-ajax>

          </div>
      </section>
  

    </core-pages>
           
  </template>
    
  <script>
    

    Polymer({
        ready: function () {
          
          //--------->escuchando si se loggea con google----------->

  },
        show_errors:function(string, pattern){
          var decorator_name = this.$.name_register;
          if (string.match(pattern) != null ) {
            decorator_name.isInvalid = false;
          }else {
            decorator_name.isInvalid = true;
            decorator_name.error="Character Incorrect, Only letters.";
          }
        },

        validate_name: function(){
          var name = this.$.r_name.value;
          var pattern = /^[a-zA-Z0-9áéíóúñÁÉÍÓÚÑ -]*$/i;
          this.show_errors(name,pattern);
        },

        validate_repass:function(){
          var pass = this.$.r_pass.value;
          var pass_tam = pass.length;
          var repas = this.$.repass.value;
          var decorator_repas = this.$.repass_register;
          if (pass==repas && repas.length==pass_tam) {
            decorator_repas.isInvalid = false;
          }
          else {
           decorator_repas.isInvalid = true;
           decorator_repas.error="Passwords do not match.";
          }
        },

        validate_mail_r: function(){
          var email = this.$.email.value;
          var pattern= /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-]{2,15})+\.)+([a-zA-Z0-9]{2,4})+$/;
          this.show_error_email(email,pattern);
        },
        show_error_email:function(string, pattern){
          var decorator_email = this.$.email_register;
          if (string.match(pattern) != null ) {
            decorator_email.isInvalid = false;
          }else {
            decorator_email.isInvalid = true;
            decorator_email.error="Write an email with the format someone@example.com.";
           
          }
        },
        loginGoogle :function(){


        },
        perfil: function () {
            location.href = "#account";
        },
        accept: function () {
            var decorator_name = this.$.name_register; //decorator name
            var decorator_pass = this.$.pass_register; //decorator pass
            var decorator_repas = this.$.repass_register; //decorator repass
            var decorator_email = this.$.email_register; //decorator mail
            var user = this.$.r_name; //input
            var pass = this.$.r_pass;
            var repas = this.$.repass;
            var mail = this.$.email;

            if ((!user.validity.valid) && (!pass.validity.valid) && (!repas.validity.valid) && (!mail.validity.valid)) {
                decorator_name.isInvalid = true;
                decorator_pass.isInvalid = true;
                decorator_repas.isInvalid = true;
                decorator_email.isInvalid = true;
            }
            else {
                decorator_name.isInvalid = false;
                decorator_pass.isInvalid = false;
                decorator_repas.isInvalid = false;
                decorator_email.isInvalid = false;

                if (!user.validity.valid) {
                  decorator_name.isInvalid = true;
                }
                      else {
                  decorator_name.isInvalid = false;
                }

                      if (!pass.validity.valid) {
                  decorator_pass.isInvalid = true;
                }
                      else {
                  decorator_pass.isInvalid = false;
                }

                      if (!repas.validity.valid) {
                  decorator_repas.isInvalid = true;
                }
                      else {
                  decorator_repas.isInvalid = false;
                }

                      if (!mail.validity.valid) {
                  decorator_email.isInvalid = true;
                }
                      else {
                  decorator_email.isInvalid = false;
                }

            }

            if ((user.validity.valid) && (pass.validity.valid) && (repas.validity.valid) && (mail.validity.valid)) {
                var user={name: user.value, email: mail.value, password: pass.value};
                //console.log('usuario'+user);
                this.postUser(user);
            }
        },
        postUser: function (user) {

         //console.log("usuario postuser"+user.name);
            var ajax = this.$.ajax;
            ajax.url="/user";
            ajax.method="POST";
            ajax.params=user;
            ajax.go();
        },

        findUser:function(){

        },
        validateSigin: function () {
            var m = this.$.decorator2; //decorator pass
            var n = this.$.decorator; //decorator user
            var user = this.$.email_s; //input
            var pass = this.$.password;

            console.log(n);
            console.log(m);

            if ((!user.validity.valid) && (!pass.validity.valid)) {
                n.isInvalid = true;
                m.isInvalid = true;
            }
            else {
                n.isInvalid = false;
                m.isInvalid = false;
                if (!user.validity.valid) {
                    n.isInvalid = true;
                }
                else {
                    n.isInvalid = false;
                }
                if (!pass.validity.valid) {
                    m.isInvalid = true;
                }
                else {
                    m.isInvalid = false;
                }

            }

            if ((user.validity.valid) && (pass.validity.valid)) {
                alert("los datos recibidos son:" + user.value + ' '+ pass.value);
                //this.perfil();
            }




        }


    });
  </script>
</polymer-element>
