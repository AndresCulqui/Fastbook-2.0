<polymer-element name="core-search">
    <template>
        <style>
        :host {
            position: absolute;
            margin: 20px;
            width: 100%;
            height: 100%;
            box-sizing: border-box;
        }
        section {
          padding: 20px;
          border: 2px white solid;
          border-radius: 7px;
          background: rgba(95,31,7, 0.2);
        }
        #options {
          width: 324px;
          padding: 0px;
          margin: 0px;
        }
        paper-input-decorator {
            width: 300px;
            background-color: white;
            border: 2px solid dimgray;
            border-radius: 5px;
            padding-left: 10px;
            padding-right: 10px;
            box-shadow: blue 20px;
        }
        #butt {
            padding-top: 15px;
            background-image: url('../images/log.jpg');
            background-size: 100% 100%;
            background-repeat: no-repeat;
            color: white;
            font-weight: bold;
            margin-top: 20px;
        }
        paper-dropdown-menu {
            width: 300px;
            background-color: white;
            border: 2px solid dimgray;
            border-radius: 5px;
            padding-left: 10px;
            padding-right: 10px;
            box-shadow: blue 20px;
            margin: 10px;
        }
        paper-dropdown {
          width: 300px;
        }
        paper-item {
            width: 300px;
        }
        #advanced {
            background-image: url('../images/log.jpg');
            background-size: 100% 100%;
            margin: 10px;
            color: white;
            font-weight: bold;
        }
        #check {
            width: 100%;
            border-radius: 6px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.6);
        }
        paper-radio-button::shadow #onRadio {
            background-color: #4285f4;
        }
        paper-radio-button::shadow #offRadio {
            border-color: white;
        }
        paper-radio-group {
            width: 300px;
        }
        paper-radio-button {
            float: left;
        }
        @media (max-width: 400px) {
            paper-input-decorator{
                width: 90%;
            }
            paper-dropdown-menu {
              width: 90%;
            }
            #option {
              width: 100%;
            }
        }
        </style>
        <section vertical layout center flex>
          
            <paper-input-decorator label="Find a book...">
              <input is="core-input" id="title">
            </paper-input-decorator>
          
            

              
              <paper-input-decorator label="Author">
                <input is="core-input" id="author">
              </paper-input-decorator>
                
              <paper-input-decorator label="ISBN">
                <input is="core-input" id="isbn">
              </paper-input-decorator>
          
          

            <paper-dropdown-menu label="Categories" id="categories">
              <paper-dropdown halign="right">
                <div>
                  <paper-item label="Primaria"></paper-item>
                  <paper-item label="Segundaria"></paper-item>
                  <paper-item label="Bachillerato"></paper-item>
                  <paper-item label="Universidad"></paper-item>
                  <paper-item label="Oposiciones"></paper-item>
                  <paper-item label="Idiomas"></paper-item>
                  <paper-item label="FormaciÃ³n profesional"></paper-item>
                  <paper-item label="Libros de lectura"></paper-item>
                </div>
                </paper-dropdown>
            </paper-dropdown-menu>
          
          
            
            <paper-dropdown-menu label="Conditions" id="conditions">
                <paper-item label="Muy bueno"></paper-item>
                <paper-item label="Bueno"></paper-item>
                <paper-item label="Normal"></paper-item>
                <paper-item label="Malo"></paper-item>
                <paper-item label="Muy malo"></paper-item>
            </paper-dropdown-menu>
              <!--
             <paper-dropdown-menu label="Price" id="price">
                <paper-item label="Free"></paper-item>
                <paper-item label="5$ - 10$"></paper-item>
                <paper-item label="10$ - 20$"></paper-item>
                <paper-item label="20$ - 30$"></paper-item>
                <paper-item label=">30$"></paper-item>
            </paper-dropdown-menu>-->
              
            <paper-button id="butt" on-tap="{{restful}}">Search</paper-button>
            <div layout horizontal center id="result_books">
              <template repeat="{{res in r}}">
                <mi-libro titulo="{{titulo}}" imagen="{{imagen}}"></mi-libro>             
              </template>  
            </div>
        </section>
    </template>
    <script>
      
        Polymer({
            show: function() {
                this.$.options.toggle();
            },
            restful: function(){
              var that=this;
              
              var bookSearch = {
                title: this.$.title.value,
                author: this.$.author.value,
                isbn: this.$.isbn.value,
                categories: this.$.categories.selected,
                conditions: this.$.conditions.selected,
                price: this.$.price.selected                
              };
              
              console.log(bookSearch);
              
              var books="http://localhost:8080/book/title/"+title;
              alert(books);
              var result_books = this.$.result_books;
              this.res=[];
              $.getJSON(books,function(result){
               
              console.log(result.book);
              for(var i = 0; i < result.book.length; i++) {
                console.log(result.book[i]);
                $(result_books).append('<mi-libro  imagen='+result.book[i].imagen+' titulo='+result.book[i].title+'>  </mi-libro>');
              }
              
    
    /*
              console.log(isbn);
              console.log(title);
              console.log(author);
              console.log(year);
              console.log(publisher);
              console.log(description);
               console.log(id);
                console.log(genre);*/
       
               
                     // Set the table td text
                $('#titulo1').text("Titulo  :"+title);
                $('#autor').text("Autor  :"+author);
                 $('#editorial').text("Editorial  :"+publisher);
                $('#anio').text("Anio :"+year);
                $('#descripcion').text("Descripcion  :"+description);
                //$("#imagen").attr("src",imagen);
                $('#otro').text("ISBN  :"+isbn);
 
             });
             
   
             
            
            }
            
        });
    </script>
</polymer-element>
